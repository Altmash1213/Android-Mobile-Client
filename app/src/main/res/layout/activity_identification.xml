<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="android.view.View" />

        <variable
            name="identificationViewModel"
            type="io.intelehealth.client.viewModels.IdentificationViewModel" />

        <variable
            name="patient"
            type="io.intelehealth.client.dto.PatientDTO" />

        <variable
            name="config"
            type="io.intelehealth.client.utilities.ConfigUtils" />

    </data>

    <android.support.design.widget.CoordinatorLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".views.activites.IdentificationActivity">

        <android.support.design.widget.AppBarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:theme="@style/AppTheme.AppBarOverlay">

            <android.support.v7.widget.Toolbar
                android:id="@+id/toolbar"
                android:layout_width="match_parent"
                android:layout_height="?attr/actionBarSize"
                android:background="?attr/colorPrimary"
                app:popupTheme="@style/AppTheme.PopupOverlay" />

        </android.support.design.widget.AppBarLayout>

        <!--<include layout="@layout/content_identification" />-->

        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:app="http://schemas.android.com/apk/res-auto"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:paddingLeft="@dimen/activity_horizontal_margin"
            android:paddingTop="@dimen/activity_vertical_margin"
            android:paddingRight="@dimen/activity_horizontal_margin"
            android:paddingBottom="@dimen/activity_vertical_margin"
            app:layout_behavior="@string/appbar_scrolling_view_behavior"
            tools:context="io.intelehealth.client.activities.identification_activity.IdentificationActivity"
            tools:showIn="@layout/activity_identification">

            <ScrollView
                android:id="@+id/identification_scrollView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentStart="true"
                android:layout_alignParentTop="true"
                android:fillViewport="false">


                <LinearLayout
                    android:id="@+id/layout_identification"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:orientation="horizontal">


                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="200dp"
                            android:layout_marginRight="10dp"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <android.support.design.widget.TextInputLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:error="@{identificationViewModel.firstnameerror}"
                                app:errorEnabled="true">
                                <!--Can't access Vector drawables directly,that's why putted into another DrawableContainer-->
                                <!--On the Left or Right of textview or Editext-->

                                <EditText
                                    android:id="@+id/identification_first_name"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:drawableStart="@drawable/person_icon"
                                    android:drawableLeft="@drawable/person_icon"
                                    android:drawablePadding="10dp"
                                    android:ems="10"
                                    android:freezesText="true"
                                    android:hint="@string/identification_screen_prompt_first_name"
                                    android:imeOptions="actionUnspecified"
                                    android:inputType="textCapWords"
                                    android:maxLines="1"
                                    android:singleLine="true"
                                    android:text="@={identificationViewModel.firstname}"
                                    android:visibility="@{config.mFirstName() ? View.GONE: View.VISIBLE}" />

                            </android.support.design.widget.TextInputLayout>

                            <android.support.design.widget.TextInputLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content">

                                <EditText
                                    android:id="@+id/identification_middle_name"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:drawableStart="@drawable/person_icon"
                                    android:drawableLeft="@drawable/person_icon"
                                    android:drawablePadding="10dp"
                                    android:ems="10"
                                    android:freezesText="true"
                                    android:hint="@string/identification_screen_prompt_middle_name"
                                    android:imeOptions="actionUnspecified"
                                    android:inputType="textCapWords"
                                    android:maxLines="1"
                                    android:singleLine="true"
                                    android:tag="@string/tag_optional"
                                    android:text="@={identificationViewModel.middlename}"
                                    android:visibility="@{config.mMiddleName() ? View.GONE: View.VISIBLE}" />

                            </android.support.design.widget.TextInputLayout>

                            <android.support.design.widget.TextInputLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:error="@{identificationViewModel.lastnameerror}"
                                app:errorEnabled="true">

                                <EditText
                                    android:id="@+id/identification_last_name"
                                    android:layout_width="match_parent"
                                    android:layout_height="wrap_content"
                                    android:autofillHints="@string/action_settings"
                                    android:drawableStart="@drawable/person_icon"
                                    android:drawableLeft="@drawable/person_icon"
                                    android:drawablePadding="10dp"
                                    android:ems="10"
                                    android:freezesText="true"
                                    android:hint="@string/identification_screen_prompt_last_name"
                                    android:imeOptions="actionUnspecified"
                                    android:inputType="textCapWords"
                                    android:maxLines="1"
                                    android:singleLine="true"
                                    android:text="@={identificationViewModel.lastname}"
                                    android:visibility="@{config.mLastName() ? View.GONE: View.VISIBLE}" />

                            </android.support.design.widget.TextInputLayout>

                        </LinearLayout>

                        <ImageView
                            android:id="@+id/imageview_id_picture"
                            android:layout_width="170dp"
                            android:layout_height="170dp"
                            android:layout_gravity="right"
                            android:scaleType="centerCrop"
                            app:srcCompat="@drawable/ic_person_camera_intele" />
                    </LinearLayout>

                    <Space
                        android:layout_width="15dp"
                        android:layout_height="20dp" />

                    <RadioGroup
                        android:id="@+id/radioGrp"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:paddingLeft="8dp"
                        android:paddingRight="8dp">

                        <RadioButton
                            android:id="@+id/identification_gender_male"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:drawableStart="@drawable/male_icon"
                            android:drawableLeft="@drawable/male_icon"
                            android:drawablePadding="10dp"
                            android:text="@string/identification_screen_checkbox_male"
                            android:textSize="@dimen/id_screen_text_size"
                            android:visibility="@{config.mGenderM() ? View.GONE: View.VISIBLE}" />

                        <RadioButton
                            android:id="@+id/identification_gender_female"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:drawableStart="@drawable/female_icon"
                            android:drawableLeft="@drawable/female_icon"
                            android:drawablePadding="10dp"
                            android:text="@string/identification_screen_checkbox_female"
                            android:textSize="@dimen/id_screen_text_size"
                            android:visibility="@{config.mGenderF() ? View.GONE: View.VISIBLE}" />

                    </RadioGroup>

                    <Space
                        android:layout_width="20dp"
                        android:layout_height="20dp" />

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        app:error="@{identificationViewModel.dateofbirtherror}"
                        app:errorEnabled="true">

                        <EditText
                            android:id="@+id/identification_birth_date_text_view"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:drawableStart="@drawable/event_icon"
                            android:drawableLeft="@drawable/event_icon"
                            android:drawablePadding="10dp"
                            android:ems="10"
                            android:focusable="false"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_birthday"
                            android:imeOptions="actionUnspecified"
                            android:maxLines="1"
                            android:singleLine="true"
                            android:text="@={identificationViewModel.dateofbirth}"
                            android:visibility="@{config.mDOB() ? View.GONE: View.VISIBLE}" />


                    </android.support.design.widget.TextInputLayout>


                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_age"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:drawableStart="@drawable/event_icon"
                            android:drawableLeft="@drawable/event_icon"
                            android:drawablePadding="10dp"
                            android:ems="10"
                            android:focusable="false"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_age"
                            android:imeOptions="actionUnspecified"
                            android:maxLines="1"
                            android:singleLine="true"
                            android:visibility="@{config.mAge() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>


                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_phone_number"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:drawableStart="@drawable/phone_icon"
                            android:drawableLeft="@drawable/phone_icon"
                            android:drawablePadding="10dp"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_phone_number"
                            android:imeOptions="actionUnspecified"
                            android:inputType="phone"
                            android:maxLength="10"
                            android:maxLines="1"
                            android:singleLine="true"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.phonenumber}"
                            android:visibility="@{config.mPhoneNum() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>


                    <LinearLayout
                        android:id="@+id/identification_llcountry_state"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:visibility="@{config.countryStateLayout() ? View.GONE: View.VISIBLE}">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:layout_marginRight="5dp"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <android.support.design.widget.TextInputLayout
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:layout_weight="1">

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    android:orientation="vertical"
                                    android:weightSum="4">

                                    <EditText
                                        android:id="@+id/identification_country"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="3"
                                        android:clickable="false"
                                        android:cursorVisible="false"
                                        android:drawableStart="@drawable/country_flag_icon"
                                        android:drawableLeft="@drawable/country_flag_icon"
                                        android:drawablePadding="10dp"
                                        android:focusable="false"
                                        android:focusableInTouchMode="false"
                                        android:freezesText="true"
                                        android:imeOptions="actionUnspecified"
                                        android:inputType="textCapWords"
                                        android:maxLines="1"

                                        android:text="@string/identification_screen_prompt_country" />

                                    <Spinner
                                        android:id="@+id/spinner_country"
                                        android:layout_width="fill_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="1" />

                                </LinearLayout>


                            </android.support.design.widget.TextInputLayout>
                        </LinearLayout>


                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:layout_marginLeft="5dp"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <android.support.design.widget.TextInputLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:weightSum="4">

                                <LinearLayout
                                    android:layout_width="match_parent"
                                    android:layout_height="match_parent"
                                    android:orientation="vertical">

                                    <EditText
                                        android:id="@+id/identification_state"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="3"
                                        android:clickable="false"
                                        android:cursorVisible="false"
                                        android:drawableStart="@drawable/state_list_icon"
                                        android:drawableLeft="@drawable/state_list_icon"
                                        android:drawablePadding="10dp"
                                        android:focusable="false"
                                        android:focusableInTouchMode="false"
                                        android:freezesText="true"
                                        android:imeOptions="actionUnspecified"
                                        android:inputType="textCapWords"
                                        android:maxLines="1"
                                        android:text="@string/identification_screen_prompt_state" />

                                    <Spinner
                                        android:id="@+id/spinner_state"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:layout_weight="1" />
                                </LinearLayout>


                            </android.support.design.widget.TextInputLayout>
                        </LinearLayout>

                    </LinearLayout>

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="10dp"
                        app:error="@{identificationViewModel.villageerror}"
                        app:errorEnabled="true">

                        <AutoCompleteTextView
                            android:id="@+id/identification_city"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:drawableStart="@drawable/home_icon"
                            android:drawableLeft="@drawable/home_icon"
                            android:drawablePadding="10dp"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_city"
                            android:imeOptions="actionUnspecified"
                            android:inputType="textCapWords"
                            android:maxLines="1"
                            android:text="@={identificationViewModel.village}"
                            android:visibility="@{config.mCity() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_address1"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_address"
                            android:imeOptions="actionUnspecified"
                            android:inputType="textCapWords"
                            android:maxLines="2"
                            android:singleLine="false"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.address}"
                            android:visibility="@{config.mAddress1() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_address2"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_address2"
                            android:imeOptions="actionUnspecified"
                            android:inputType="textCapWords"
                            android:maxLines="2"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.address2}"
                            android:visibility="@{config.mAddress1() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_postal_code"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_postal_code"
                            android:imeOptions="actionUnspecified"
                            android:inputType="number"
                            android:maxLines="1"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.postalcode}"

                            android:visibility="@{config.mPostal() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>


                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_relationship"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_relationship"
                            android:imeOptions="actionUnspecified"
                            android:inputType="textCapWords"
                            android:maxLines="1"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.sondaughter}"

                            android:visibility="@{config.mRelationship() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <EditText
                            android:id="@+id/identification_occupation"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:drawableStart="@drawable/occupation_icon"
                            android:drawableLeft="@drawable/occupation_icon"
                            android:drawablePadding="10dp"
                            android:ems="10"
                            android:freezesText="true"
                            android:hint="@string/identification_screen_prompt_occupation"
                            android:imeOptions="actionUnspecified"
                            android:inputType="textCapWords"

                            android:maxLines="1"
                            android:tag="@string/tag_optional"
                            android:text="@={identificationViewModel.occupation}"
                            android:visibility="@{config.mOccupation() ? View.GONE: View.VISIBLE}" />

                    </android.support.design.widget.TextInputLayout>


                    <Space
                        android:layout_width="20dp"
                        android:layout_height="20dp" />

                    <android.support.design.widget.TextInputLayout
                        android:id="@+id/identification_txtlcaste"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="horizontal"
                            android:weightSum="4">

                            <EditText
                                android:id="@+id/identification_caste"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:clickable="false"
                                android:cursorVisible="false"
                                android:drawableStart="@drawable/person_icon"
                                android:drawableLeft="@drawable/person_icon"
                                android:drawablePadding="10dp"
                                android:focusable="false"
                                android:focusableInTouchMode="false"

                                android:freezesText="true"
                                android:imeOptions="actionUnspecified"
                                android:inputType="textCapWords"
                                android:maxLines="1"
                                android:text="@string/identification_screen_prompt_caste"
                                android:visibility="@{config.casteLayout() ? View.GONE: View.VISIBLE}" />

                            <Spinner
                                android:id="@+id/spinner_caste"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:onItemSelected="@{(parent,view,pos,id)->identificationViewModel.onCasteSelectItem(parent,view,pos,id)}" />
                        </LinearLayout>

                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:id="@+id/identification_txtleconomic"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="horizontal"
                            android:weightSum="4">

                            <EditText
                                android:id="@+id/identification_econiomic_status"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:clickable="false"
                                android:cursorVisible="false"
                                android:drawableStart="@drawable/econiomic_status_icon"
                                android:drawableLeft="@drawable/econiomic_status_icon"
                                android:drawablePadding="10dp"
                                android:focusable="false"
                                android:focusableInTouchMode="false"
                                android:freezesText="true"
                                android:imeOptions="actionUnspecified"

                                android:inputType="textCapWords"
                                android:maxLines="1"
                                android:text="@string/identification_screen_prompt_economic_status"
                                android:visibility="@{config.economicLayout() ? View.GONE: View.VISIBLE}" />

                            <Spinner
                                android:id="@+id/spinner_economic_status"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:onItemSelected="@{(parent,view,pos,id)->identificationViewModel.onEconomicSelectItem(parent,view,pos,id)}" />
                        </LinearLayout>
                    </android.support.design.widget.TextInputLayout>

                    <android.support.design.widget.TextInputLayout
                        android:id="@+id/identification_txtleducation"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:orientation="horizontal"
                            android:weightSum="4">

                            <EditText
                                android:id="@+id/identification_education"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:clickable="false"
                                android:cursorVisible="false"
                                android:drawableStart="@drawable/education_icon"
                                android:drawableLeft="@drawable/education_icon"
                                android:drawablePadding="10dp"
                                android:focusable="false"
                                android:focusableInTouchMode="false"
                                android:freezesText="true"
                                android:imeOptions="actionUnspecified"

                                android:inputType="textCapWords"
                                android:maxLines="1"
                                android:text="@string/identification_screen_prompt_education"
                                android:visibility="@{config.educationLayout() ? View.GONE: View.VISIBLE}" />

                            <Spinner
                                android:id="@+id/spinner_education"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:onItemSelected="@{(parent,view,pos,id)->identificationViewModel.onEducationSelectItem(parent,view,pos,id)}" />
                        </LinearLayout>


                    </android.support.design.widget.TextInputLayout>


                </LinearLayout>
            </ScrollView>


        </RelativeLayout>

        <android.support.design.widget.FloatingActionButton
            android:id="@+id/fab"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|end"
            android:layout_margin="@dimen/fab_margin"
            android:onClick="@{(v)->identificationViewModel.onPatientCreateClicked()}"
            app:srcCompat="@drawable/ic_done_24dp" />
    </android.support.design.widget.CoordinatorLayout>
</layout>